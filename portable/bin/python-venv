#!/bin/bash
argcount=$#
if [ $argcount -eq 0 ] ; then
    echo "No virtualenv requested" 1>&2
    exit 1
fi
if [ -z "${WORKON_HOME}" ] ; then
    echo "WORKON_HOME is not set" 1>&2
    exit 1
fi
virtualenv_name="${1}"
shift

virtualenv_path="${WORKON_HOME}/${virtualenv_name}/bin/python"
if [ ! -e "${virtualenv_path}" ] ; then
    echo "Cannot find virtualenv ${virtualenv_name}" 1>&2
    exit 1
fi

if [ $argcount -eq 0 ] ; then
    "${virtualenv_path}"
else
    "${virtualenv_path}" "${@}"
fi
